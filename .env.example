# Recommendation System - Environment Configuration
# Copy this file to .env and update with your actual values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_HOST=78.152.175.67
DB_PORT=1433
DB_NAME=ConcordDb_v5
DB_USER=sa
DB_PASSWORD=Passw0rd

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=redis        # Use 'redis' for Docker, '127.0.0.1' for local
REDIS_PORT=6379
REDIS_DB=0
CACHE_TTL=3600          # Cache TTL in seconds (1 hour for ad-hoc requests)

# ============================================================================
# WORKER CONFIGURATION
# ============================================================================
# Optional: Override the as_of_date for recommendations (default: today)
# AS_OF_DATE=2024-07-01

# Cron schedule for weekly worker (default: Sunday 2 AM)
# Format: minute hour day month weekday
# Examples:
#   0 2 * * 0  → Sunday 2 AM
#   0 3 * * 1  → Monday 3 AM
#   0 0 * * *  → Daily midnight
CRON_SCHEDULE=0 2 * * 0

# Run worker immediately on container startup (before cron)
# Set to 'true' for immediate first run, 'false' to wait for cron schedule
RUN_ON_STARTUP=false

# ============================================================================
# API CONFIGURATION
# ============================================================================
# Number of uvicorn workers for API (default: 4)
API_WORKERS=4

# API host and port
API_HOST=0.0.0.0
API_PORT=8000

# ============================================================================
# DATABASE CONFIGURATION (MSSQL format - used by db_pool.py)
# ============================================================================
# Note: db_pool.py uses MSSQL_* variables, not DB_* variables
MSSQL_HOST=78.152.175.67
MSSQL_PORT=1433
MSSQL_DATABASE=ConcordDb_v5
MSSQL_USER=your-username
MSSQL_PASSWORD=your-password

# ============================================================================
# FORECAST WORKER CONFIGURATION
# ============================================================================
# Forecast cache TTL in seconds (default: 7 days)
FORECAST_CACHE_TTL=604800

# Number of parallel workers for batch forecasting (default: 10)
FORECAST_WORKERS=10

# Minimum criteria for forecastable products
FORECAST_MIN_CUSTOMERS=2
FORECAST_MIN_ORDERS=3

# Cron schedule for forecast worker (default: Sunday 3 AM)
# Format: minute hour day month weekday
# Examples:
#   0 3 * * 0  → Sunday 3 AM
#   0 4 * * 1  → Monday 4 AM
#   0 2 * * 6  → Saturday 2 AM
FORECAST_CRON_SCHEDULE=0 3 * * 0

# Run forecast worker on container startup (default: false)
FORECAST_RUN_ON_STARTUP=false
