{
  "domain": "sales",
  "description": "Sales and orders query examples",
  "tables": [
    "Sale",
    "Order",
    "OrderItem",
    "Product",
    "Client",
    "ClientAgreement"
  ],
  "examples": [
    {
      "id": "sales_yearly_001",
      "category": "time_based",
      "complexity": "medium",
      "question_en": "Show sales by year",
      "question_uk": "Покажи продажі по роках",
      "variations_en": [
        "yearly sales",
        "sales per year",
        "annual sales"
      ],
      "variations_uk": [
        "продажі за роками",
        "річні продажі",
        "по роках"
      ],
      "sql": "SELECT YEAR(s.Created) as Year, COUNT(*) as SalesCount FROM dbo.Sale s WHERE s.Deleted = 0 GROUP BY YEAR(s.Created) ORDER BY Year DESC",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_monthly_002",
      "category": "time_based",
      "complexity": "medium",
      "question_en": "Sales by month this year",
      "question_uk": "Продажі по місяцях цього року",
      "variations_en": [
        "monthly sales 2024",
        "sales per month",
        "this year monthly"
      ],
      "variations_uk": [
        "помісячні продажі",
        "продажі за місяцями",
        "місячний звіт"
      ],
      "sql": "SELECT MONTH(s.Created) as Month, COUNT(*) as SalesCount FROM dbo.Sale s WHERE s.Deleted = 0 AND YEAR(s.Created) = YEAR(GETDATE()) GROUP BY MONTH(s.Created) ORDER BY Month",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_total_003",
      "category": "aggregation",
      "complexity": "simple",
      "question_en": "Total number of sales",
      "question_uk": "Загальна кількість продажів",
      "variations_en": [
        "how many sales",
        "sales count",
        "total sales"
      ],
      "variations_uk": [
        "сума продажів",
        "скільки продажів",
        "виручка",
        "всього продажів",
        "всього продано",
        "скільки продали",
        "обсяг продажів",
        "загальні продажі",
        "кількість продажів",
        "дохід від продажів"
      ],
      "sql": "SELECT COUNT(*) as TotalSales FROM dbo.Sale WHERE Deleted = 0",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_today_004",
      "category": "time_based",
      "complexity": "simple",
      "question_en": "Sales today",
      "question_uk": "Продажі сьогодні",
      "variations_en": [
        "today's sales",
        "sales for today",
        "how many sales today"
      ],
      "variations_uk": [
        "сьогоднішні продажі",
        "продажі за сьогодні",
        "скільки сьогодні"
      ],
      "sql": "SELECT COUNT(*) as TodaySales FROM dbo.Sale WHERE Deleted = 0 AND CAST(Created AS DATE) = CAST(GETDATE() AS DATE)",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_this_week_005",
      "category": "time_based",
      "complexity": "simple",
      "question_en": "Sales this week",
      "question_uk": "Продажі за цей тиждень",
      "variations_en": [
        "weekly sales",
        "this week orders",
        "current week sales"
      ],
      "variations_uk": [
        "тижневі продажі",
        "за тиждень",
        "продажі тижня"
      ],
      "sql": "SELECT COUNT(*) as WeeklySales FROM dbo.Sale WHERE Deleted = 0 AND Created >= DATEADD(day, -7, GETDATE())",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_this_month_006",
      "category": "time_based",
      "complexity": "simple",
      "question_en": "Sales this month",
      "question_uk": "Продажі за цей місяць",
      "variations_en": [
        "monthly sales",
        "current month",
        "this month orders"
      ],
      "variations_uk": [
        "за місяць",
        "місячні продажі",
        "цього місяця"
      ],
      "sql": "SELECT COUNT(*) as MonthlySales FROM dbo.Sale WHERE Deleted = 0 AND MONTH(Created) = MONTH(GETDATE()) AND YEAR(Created) = YEAR(GETDATE())",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_2024_007",
      "category": "time_based",
      "complexity": "simple",
      "question_en": "Sales in 2024",
      "question_uk": "Продажі у 2024 році",
      "variations_en": [
        "2024 sales",
        "sales for 2024",
        "how many sales in 2024"
      ],
      "variations_uk": [
        "продажі 2024",
        "за 2024 рік",
        "скільки у 2024"
      ],
      "sql": "SELECT COUNT(*) as Sales2024 FROM dbo.Sale WHERE Deleted = 0 AND YEAR(Created) = 2024",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_last_month_008",
      "category": "time_based",
      "complexity": "medium",
      "question_en": "Sales last month",
      "question_uk": "Продажі за минулий місяць",
      "variations_en": [
        "previous month sales",
        "last month orders"
      ],
      "variations_uk": [
        "минулого місяця",
        "попередній місяць"
      ],
      "sql": "SELECT COUNT(*) as LastMonthSales FROM dbo.Sale WHERE Deleted = 0 AND MONTH(Created) = MONTH(DATEADD(month, -1, GETDATE())) AND YEAR(Created) = YEAR(DATEADD(month, -1, GETDATE()))",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "orders_count_009",
      "category": "aggregation",
      "complexity": "simple",
      "question_en": "Total number of orders",
      "question_uk": "Загальна кількість замовлень",
      "variations_en": [
        "how many orders",
        "order count",
        "total orders"
      ],
      "variations_uk": [
        "скільки замовлень",
        "кількість замовлень",
        "всього замовлень"
      ],
      "sql": "SELECT COUNT(*) as TotalOrders FROM dbo.[Order] WHERE Deleted = 0",
      "tables_used": [
        "Order"
      ]
    },
    {
      "id": "orders_today_010",
      "category": "time_based",
      "complexity": "simple",
      "question_en": "Orders placed today",
      "question_uk": "Замовлення за сьогодні",
      "variations_en": [
        "today's orders",
        "how many orders today"
      ],
      "variations_uk": [
        "сьогоднішні замовлення",
        "скільки замовлень сьогодні"
      ],
      "sql": "SELECT COUNT(*) as TodayOrders FROM dbo.[Order] WHERE Deleted = 0 AND CAST(Created AS DATE) = CAST(GETDATE() AS DATE)",
      "tables_used": [
        "Order"
      ]
    },
    {
      "id": "order_items_count_011",
      "category": "aggregation",
      "complexity": "simple",
      "question_en": "Total order line items",
      "question_uk": "Загальна кількість позицій замовлень",
      "variations_en": [
        "order items count",
        "how many order lines"
      ],
      "variations_uk": [
        "скільки позицій",
        "кількість рядків замовлень"
      ],
      "sql": "SELECT COUNT(*) as TotalOrderItems FROM dbo.OrderItem WHERE Deleted = 0",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_with_details_012",
      "category": "listing",
      "complexity": "medium",
      "question_en": "Recent sales with details",
      "question_uk": "Останні продажі з деталями",
      "variations_en": [
        "latest sales details",
        "recent orders info"
      ],
      "variations_uk": [
        "детальні продажі",
        "інформація про продажі"
      ],
      "sql": "SELECT TOP 20 s.ID, s.Created, o.ID as OrderID, COUNT(oi.ID) as ItemCount, SUM(oi.Qty) as TotalQty FROM dbo.Sale s JOIN dbo.[Order] o ON s.OrderID = o.ID JOIN dbo.OrderItem oi ON o.ID = oi.OrderID WHERE s.Deleted = 0 AND o.Deleted = 0 AND oi.Deleted = 0 GROUP BY s.ID, s.Created, o.ID ORDER BY s.Created DESC",
      "tables_used": [
        "Sale",
        "Order",
        "OrderItem"
      ]
    },
    {
      "id": "sales_revenue_daily_013",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Daily sales revenue this month",
      "question_uk": "Денна виручка за цей місяць",
      "variations_en": [
        "daily revenue",
        "revenue by day"
      ],
      "variations_uk": [
        "виручка по дням",
        "денний дохід"
      ],
      "sql": "SELECT CAST(oi.Created AS DATE) as SaleDate, SUM(oi.Qty * oi.PricePerItem) as DailyRevenue FROM dbo.OrderItem oi WHERE oi.Deleted = 0 AND MONTH(oi.Created) = MONTH(GETDATE()) AND YEAR(oi.Created) = YEAR(GETDATE()) GROUP BY CAST(oi.Created AS DATE) ORDER BY SaleDate DESC",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_total_revenue_014",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Total sales revenue",
      "question_uk": "Загальна виручка від продажів",
      "variations_en": [
        "total revenue",
        "all time revenue",
        "how much earned"
      ],
      "variations_uk": [
        "сума продажів",
        "виручка",
        "всього продано",
        "скільки продали",
        "загальний дохід",
        "вся виручка",
        "обсяг продажів",
        "загальні продажі",
        "скільки заробили",
        "дохід від продажів"
      ],
      "sql": "SELECT SUM(oi.Qty * oi.PricePerItem) as TotalRevenue FROM dbo.OrderItem oi WHERE oi.Deleted = 0",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_revenue_2024_015",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Revenue in 2024",
      "question_uk": "Виручка за 2024 рік",
      "variations_en": [
        "2024 revenue",
        "earnings 2024",
        "how much in 2024"
      ],
      "variations_uk": [
        "дохід 2024",
        "заробіток за 2024",
        "скільки у 2024"
      ],
      "sql": "SELECT SUM(oi.Qty * oi.PricePerItem) as Revenue2024 FROM dbo.OrderItem oi WHERE oi.Deleted = 0 AND YEAR(oi.Created) = 2024",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_avg_order_016",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Average order value",
      "question_uk": "Середня вартість замовлення",
      "variations_en": [
        "average order amount",
        "avg order value",
        "mean order size"
      ],
      "variations_uk": [
        "середнє замовлення",
        "середня сума замовлення"
      ],
      "sql": "SELECT AVG(OrderTotal) as AvgOrderValue FROM (SELECT oi.OrderID, SUM(oi.Qty * oi.PricePerItem) as OrderTotal FROM dbo.OrderItem oi WHERE oi.Deleted = 0 GROUP BY oi.OrderID) as OrderTotals",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_largest_order_017",
      "category": "ranking",
      "complexity": "medium",
      "question_en": "Largest orders by value",
      "question_uk": "Найбільші замовлення за сумою",
      "variations_en": [
        "biggest orders",
        "top orders by amount",
        "highest value orders"
      ],
      "variations_uk": [
        "найбільші замовлення",
        "топ замовлень",
        "найдорожчі замовлення"
      ],
      "sql": "SELECT TOP 10 oi.OrderID, SUM(oi.Qty * oi.PricePerItem) as OrderTotal, COUNT(*) as ItemCount FROM dbo.OrderItem oi WHERE oi.Deleted = 0 GROUP BY oi.OrderID ORDER BY OrderTotal DESC",
      "tables_used": [
        "OrderItem"
      ]
    },
    {
      "id": "sales_by_product_018",
      "category": "aggregation",
      "complexity": "complex",
      "question_en": "Sales breakdown by product",
      "question_uk": "Продажі в розрізі товарів",
      "variations_en": [
        "sales per product",
        "product sales breakdown"
      ],
      "variations_uk": [
        "продажі по товарах",
        "розбивка по продуктах"
      ],
      "sql": "SELECT TOP 20 p.Name, p.VendorCode, SUM(oi.Qty) as TotalQty, SUM(oi.Qty * oi.PricePerItem) as TotalRevenue FROM dbo.OrderItem oi JOIN dbo.Product p ON oi.ProductID = p.ID WHERE oi.Deleted = 0 AND p.Deleted = 0 GROUP BY p.ID, p.Name, p.VendorCode ORDER BY TotalRevenue DESC",
      "tables_used": [
        "OrderItem",
        "Product"
      ]
    },
    {
      "id": "sales_compare_years_019",
      "category": "comparison",
      "complexity": "complex",
      "question_en": "Compare sales 2023 vs 2024",
      "question_uk": "Порівняй продажі 2023 та 2024",
      "variations_en": [
        "2023 vs 2024 sales",
        "year over year comparison"
      ],
      "variations_uk": [
        "продажі цього року vs минулого",
        "ріст продажів",
        "2023 проти 2024",
        "порівняння років",
        "як змінились продажі",
        "порівняти продажі",
        "динаміка росту"
      ],
      "sql": "SELECT YEAR(Created) as Year, COUNT(*) as SalesCount FROM dbo.Sale WHERE Deleted = 0 AND YEAR(Created) IN (2023, 2024) GROUP BY YEAR(Created) ORDER BY Year",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_pending_020",
      "category": "filter",
      "complexity": "medium",
      "question_en": "Pending sales",
      "question_uk": "Незавершені продажі",
      "variations_en": [
        "incomplete sales",
        "sales in progress"
      ],
      "variations_uk": [
        "в процесі",
        "незакриті продажі"
      ],
      "sql": "SELECT TOP 50 s.ID, s.Created, s.OrderStatus FROM dbo.Sale s WHERE s.Deleted = 0 AND s.BaseSalePaymentStatusID IS NULL ORDER BY s.Created DESC",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "orders_with_items_021",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Orders with item count",
      "question_uk": "Замовлення з кількістю позицій",
      "variations_en": [
        "order sizes",
        "items per order"
      ],
      "variations_uk": [
        "розмір замовлень",
        "позицій в замовленні"
      ],
      "sql": "SELECT TOP 20 o.ID as OrderID, o.Created, COUNT(oi.ID) as ItemCount, SUM(oi.Qty) as TotalQty FROM dbo.[Order] o JOIN dbo.OrderItem oi ON o.ID = oi.OrderID WHERE o.Deleted = 0 AND oi.Deleted = 0 GROUP BY o.ID, o.Created ORDER BY o.Created DESC",
      "tables_used": [
        "Order",
        "OrderItem"
      ]
    },
    {
      "id": "sales_growth_022",
      "category": "comparison",
      "complexity": "complex",
      "question_en": "Sales growth month over month",
      "question_uk": "Зростання продажів по місяцях",
      "variations_en": [
        "monthly growth",
        "sales trend"
      ],
      "variations_uk": [
        "тренд продажів",
        "динаміка продажів"
      ],
      "sql": "SELECT YEAR(Created) as Year, MONTH(Created) as Month, COUNT(*) as SalesCount FROM dbo.Sale WHERE Deleted = 0 AND Created >= DATEADD(year, -1, GETDATE()) GROUP BY YEAR(Created), MONTH(Created) ORDER BY Year, Month",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_weekend_023",
      "category": "filter",
      "complexity": "medium",
      "question_en": "Weekend sales",
      "question_uk": "Продажі у вихідні",
      "variations_en": [
        "saturday sunday sales",
        "weekend orders"
      ],
      "variations_uk": [
        "субота неділя",
        "продажі на вихідних"
      ],
      "sql": "SELECT COUNT(*) as WeekendSales FROM dbo.Sale WHERE Deleted = 0 AND DATEPART(dw, Created) IN (1, 7) AND YEAR(Created) = YEAR(GETDATE())",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "sales_hourly_024",
      "category": "aggregation",
      "complexity": "medium",
      "question_en": "Sales by hour of day",
      "question_uk": "Продажі по годинах",
      "variations_en": [
        "hourly sales distribution",
        "peak hours"
      ],
      "variations_uk": [
        "розподіл по годинах",
        "пікові години"
      ],
      "sql": "SELECT DATEPART(hour, Created) as Hour, COUNT(*) as SalesCount FROM dbo.Sale WHERE Deleted = 0 AND Created >= DATEADD(month, -1, GETDATE()) GROUP BY DATEPART(hour, Created) ORDER BY Hour",
      "tables_used": [
        "Sale"
      ]
    },
    {
      "id": "orders_recent_025",
      "category": "listing",
      "complexity": "simple",
      "question_en": "Recent orders",
      "question_uk": "Останні замовлення",
      "variations_en": [
        "latest orders",
        "new orders",
        "recent order list"
      ],
      "variations_uk": [
        "нові замовлення",
        "свіжі замовлення",
        "список замовлень"
      ],
      "sql": "SELECT TOP 20 ID, Created, OrderStatus, OrderSource FROM dbo.[Order] WHERE Deleted = 0 ORDER BY Created DESC",
      "tables_used": [
        "Order"
      ]
    },
    {
      "id": "sales_product_top_sem",
      "category": "ranking",
      "complexity": "medium",
      "question_en": "Top SEM products by sales",
      "question_uk": "Топ продажів SEM",
      "variations_en": [
        "best selling SEM",
        "SEM sales ranking"
      ],
      "variations_uk": [
        "покажи топ продажів SEM",
        "найкращі продажі SEM",
        "лідери продажів SEM"
      ],
      "sql": "SELECT TOP 10 p.Name, p.VendorCode, SUM(oi.Qty) as TotalSold, COUNT(DISTINCT oi.OrderID) as OrderCount FROM dbo.Product p JOIN dbo.OrderItem oi ON oi.ProductID = p.ID WHERE p.Deleted = 0 AND oi.Deleted = 0 AND p.VendorCode LIKE N'SEM%' GROUP BY p.ID, p.Name, p.VendorCode ORDER BY TotalSold DESC",
      "tables_used": [
        "Product",
        "OrderItem"
      ]
    },
    {
      "id": "sales_product_top_vendorcode",
      "category": "ranking",
      "complexity": "medium",
      "question_en": "Top products by vendor code prefix",
      "question_uk": "Топ товарів за кодом",
      "variations_en": [
        "sales by product code",
        "product sales by code"
      ],
      "variations_uk": [
        "продажі за кодом товару",
        "топ товарів за артикулом"
      ],
      "sql": "SELECT TOP 10 p.Name, p.VendorCode, SUM(oi.Qty) as TotalSold FROM dbo.Product p JOIN dbo.OrderItem oi ON oi.ProductID = p.ID WHERE p.Deleted = 0 AND oi.Deleted = 0 AND p.VendorCode LIKE N'%keyword%' GROUP BY p.ID, p.Name, p.VendorCode ORDER BY TotalSold DESC",
      "tables_used": [
        "Product",
        "OrderItem"
      ]
    },
    {
      "id": "sales_by_client_correct",
      "category": "aggregation",
      "complexity": "complex",
      "question_en": "Sales by client",
      "question_uk": "Продажі по клієнтах",
      "variations_en": [
        "client sales",
        "revenue by customer"
      ],
      "variations_uk": [
        "виручка по клієнтах",
        "продажі клієнтів"
      ],
      "sql": "SELECT TOP 20 c.Name, COUNT(DISTINCT s.ID) as SalesCount, SUM(oi.Qty * oi.PricePerItem) as TotalAmount FROM dbo.Client c JOIN dbo.ClientAgreement ca ON ca.ClientID = c.ID JOIN dbo.Sale s ON s.ClientAgreementID = ca.ID JOIN dbo.[Order] o ON o.ID = s.OrderID JOIN dbo.OrderItem oi ON oi.OrderID = o.ID WHERE c.Deleted = 0 AND s.Deleted = 0 GROUP BY c.ID, c.Name ORDER BY TotalAmount DESC",
      "tables_used": [
        "Client",
        "ClientAgreement",
        "Sale",
        "Order",
        "OrderItem"
      ]
    },
    {
      "id": "sales_order_items_detail",
      "category": "listing",
      "complexity": "medium",
      "question_en": "Order items with prices",
      "question_uk": "Позиції замовлення з цінами",
      "variations_en": [
        "order details",
        "items in order"
      ],
      "variations_uk": [
        "деталі замовлення",
        "товари в замовленні"
      ],
      "sql": "SELECT p.Name, p.VendorCode, oi.Qty, oi.PricePerItem, (oi.Qty * oi.PricePerItem) as Total FROM dbo.OrderItem oi JOIN dbo.Product p ON p.ID = oi.ProductID WHERE oi.Deleted = 0 AND oi.OrderID = @OrderID",
      "tables_used": [
        "OrderItem",
        "Product"
      ]
    },
    {
      "id": "sales_top_products_overall",
      "category": "ranking",
      "complexity": "medium",
      "question_en": "Top selling products overall",
      "question_uk": "Топ продажів товарів",
      "variations_en": [
        "best sellers",
        "most sold products"
      ],
      "variations_uk": [
        "найкращі продажі",
        "топ продаж",
        "лідери продажів"
      ],
      "sql": "SELECT TOP 10 p.Name, p.VendorCode, SUM(oi.Qty) as TotalSold, COUNT(DISTINCT oi.OrderID) as OrderCount FROM dbo.Product p JOIN dbo.OrderItem oi ON oi.ProductID = p.ID WHERE p.Deleted = 0 AND oi.Deleted = 0 GROUP BY p.ID, p.Name, p.VendorCode ORDER BY TotalSold DESC",
      "tables_used": [
        "Product",
        "OrderItem"
      ]
    }
  ]
}